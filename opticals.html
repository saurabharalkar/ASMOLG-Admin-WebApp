<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optical Store Customer Entry System</title>
    <!-- Include Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100">
    <div class="container mx-auto mt-8 p-4">
        <h1 class="text-3xl font-semibold mb-4">Optical Store Customer Entry System</h1>

        <!-- Customer Entry Form -->
        <div class="bg-white p-4 shadow-md rounded-lg">
            <form id="customer-form" class="grid grid-cols-3 gap-4">
                <div>
                    <label for="customerName" class="block font-semibold text-gray-700">Name</label>
                    <input type="text" name="customerName" id="customerName"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="contactNumber" class="block font-semibold text-gray-700">Contact Number</label>
                    <input type="text" name="contactNumber" id="contactNumber"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="refNo" class="block font-semibold text-gray-700">Ref No</label>
                    <input type="text" name="refNo" id="refNo" class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="drName" class="block font-semibold text-gray-700">Dr Name</label>
                    <input type="text" name="drName" id="drName" class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="address" class="block font-semibold text-gray-700">Address</label>
                    <input type="text" name="address" id="address"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="glassType" class="block font-semibold text-gray-700">Glass Type</label>
                    <input type="text" name="glassType" id="glassType"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="leftAXIS" class="block font-semibold text-gray-700">Left Axis</label>
                    <input type="text" name="leftAXIS" id="leftAXIS"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="leftCYL" class="block font-semibold text-gray-700">Left CYL</label>
                    <input type="text" name="leftCYL" id="leftCYL"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="leftSPH" class="block font-semibold text-gray-700">Left SPH</label>
                    <input type="text" name="leftSPH" id="leftSPH"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="rightAXIS" class="block font-semibold text-gray-700">Right Axis</label>
                    <input type="text" name="rightAXIS" id="rightAXIS"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="rightCYL" class="block font-semibold text-gray-700">Right CYL</label>
                    <input type="text" name="rightCYL" id="rightCYL"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="rightSPH" class="block font-semibold text-gray-700">Right SPH</label>
                    <input type="text" name="rightSPH" id="rightSPH"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="addition" class="block font-semibold text-gray-700">Addition</label>
                    <input type="text" name="addition" id="addition"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="customerAmount" class="block font-semibold text-gray-700">Total Amount</label>
                    <input type="text" name="customerAmount" id="customerAmount"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div>
                    <label for="customerPaid" class="block font-semibold text-gray-700">Credit</label>
                    <input type="text" name="customerPaid" id="customerPaid"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <div style="display: none;">
                    <label for="customerBalance" class="block font-semibold text-gray-700">Balance</label>
                    <input type="text" name="customerBalance" id="customerBalance"
                        class="border border-gray-300 p-2 rounded mt-2 w-full">
                </div>
                <!-- Add more fields as needed -->
            </form>

            <div class="grid grid-cols-2 gap-4">
                <button id="submitBtn"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded mt-4">Submit
                    Entry</button>

                <!-- Add this button to your previous page (where customer entries are added) -->
                <a href="search.html"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded mt-4">Search
                    Entries</a>
            </div>


        </div>

        <!-- Display Customer Entries -->
        <div id="customer-entries" class="mt-8">
            <!-- Customer entries will be displayed here -->
        </div>
    </div>

    <!-- Include Firebase and your Firebase configuration here -->
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>
    <script>
        // Initialize Firebase with your configuration
        var firebaseConfig = {
            apiKey: "AIzaSyC8E9NOI6hYvl6Bf408B88M4UQJjCmcQs8",
            authDomain: "asmolg-159c7.firebaseapp.com",
            databaseURL: "https://asmolg-159c7-default-rtdb.firebaseio.com",
            projectId: "asmolg-159c7",
            storageBucket: "asmolg-159c7.appspot.com",
            messagingSenderId: "974917209960",
            appId: "1:974917209960:web:39e5077bb70dc86599d0dd",
            measurementId: "G-F3RCV27K1X"
        };

        firebase.initializeApp(firebaseConfig);

        // Reference to the Firestore collection for customer entries
        const db = firebase.firestore();
        const customerCollection = db.collection("Akshay-Opticals");

        // Reference to the HTML elements
        const customerForm = document.getElementById('customer-form');
        const submitBtn = document.getElementById('submitBtn');
        const customerEntries = document.getElementById('customer-entries');

        // Add event listener for form submission
        submitBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const customerName = customerForm.querySelector('#customerName').value;
            const contactNumber = customerForm.querySelector('#contactNumber').value;
            const refNo = customerForm.querySelector('#refNo').value;
            const drName = customerForm.querySelector('#drName').value;
            const address = customerForm.querySelector('#address').value;
            const glassType = customerForm.querySelector('#glassType').value;
            const leftAXIS = customerForm.querySelector('#leftAXIS').value;
            const leftCYL = customerForm.querySelector('#leftCYL').value;
            const leftSPH = customerForm.querySelector('#leftSPH').value;
            const rightAXIS = customerForm.querySelector('#rightAXIS').value;
            const rightCYL = customerForm.querySelector('#rightCYL').value;
            const rightSPH = customerForm.querySelector('#rightSPH').value;
            const customerAmount = customerForm.querySelector('#customerAmount').value;
            const customerPaid = customerForm.querySelector('#customerPaid').value;
            const customerBalance = customerForm.querySelector('#customerBalance').value;

            // Validate the form data and submit to Firestore
            if (customerName.trim() === "" || contactNumber.trim() === "") {
                alert("Please fill in all fields.");
                return;
            }

            // Add a new customer entry to Firestore
            customerCollection.add({
                customerName: customerName,
                contactNumber: '+91' + ' ' + contactNumber,
                refNo: refNo,
                drName: 'Dr.' + ' ' + drName,
                address: address,
                glassType: glassType,
                leftAXIS: leftAXIS,
                leftCYL: leftCYL,
                leftSPH: leftSPH,
                rightAXIS: rightAXIS,
                rightCYL: rightCYL,
                rightSPH: rightSPH,
                customerAmount: customerAmount,
                customerPaid: customerPaid,
                customerBalance: customerAmount - customerPaid

                // Add more fields as needed
            }).then(() => {
                customerForm.reset();
                displayCustomerEntries();
            }).catch(error => {
                console.error("Error adding customer entry: ", error);
            });
        });
    </script>
</body>

</html>