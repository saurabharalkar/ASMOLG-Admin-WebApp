<!DOCTYPE html>
<html>

<head>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>
    <!-- Add Tailwind CSS CDN link here -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100 p-8">
    <div class="max-w-lg mx-auto bg-white rounded-lg shadow-md p-4">
        <h1 class="text-2xl font-semibold mb-4">Document Viewer</h1>
        <ul id="document-list" class="space-y-2"></ul>
        <div id="document-content" class="mt-4"></div>
    </div>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyC8E9NOI6hYvl6Bf408B88M4UQJjCmcQs8",
            authDomain: "asmolg-159c7.firebaseapp.com",
            databaseURL: "https://asmolg-159c7-default-rtdb.firebaseio.com",
            projectId: "asmolg-159c7",
            storageBucket: "asmolg-159c7.appspot.com",
            messagingSenderId: "974917209960",
            appId: "1:974917209960:web:39e5077bb70dc86599d0dd",
            measurementId: "G-F3RCV27K1X"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        const firestore = firebase.firestore();
        const documentList = document.getElementById('document-list');
        const documentContent = document.getElementById('document-content');

        // Function to load documents
        function loadDocuments() {
            const collectionName = "CD"; // Replace with your desired collection name

            firestore.collection(collectionName).get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const title = data.title;
                    const url = data.url;

                    // Create a card for each document
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-lg shadow-md p-4';
                    card.innerHTML = `
                        <h2 class="text-xl font-semibold mb-2">${title}</h2>
                        <a href="#" data-document-url="${url}" class="text-blue-500 hover:underline">View Document</a>
                    `;
                    documentList.appendChild(card);

                    // Add a click event listener to each "View Document" link
                    const viewDocumentLink = card.querySelector('a');
                    viewDocumentLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        const documentUrl = e.target.getAttribute('data-document-url');
                        loadDocument(documentUrl, title);
                    });
                });
            });
        }

        // Function to load a specific document
        function loadDocument(documentUrl, title) {
            // Display the document title and embed it using Google Docs Viewer
            documentContent.innerHTML = `
                <h2 class="text-2xl font-semibold mb-4">${title}</h2>
                <iframe src="https://docs.google.com/viewer?url=${encodeURIComponent(documentUrl)}&embedded=true" class="w-full h-96" frameborder="0"></iframe>
            `;
        }

        // Call the function to load documents when the page loads
        window.addEventListener('load', loadDocuments);
    </script>
</body>

</html>